\ProvidesPackage{dcti}

\DeclareOption{report}{\gdef\isreport{}}
\ProcessOptions\relax

% =================================================================
% Hey! Don't mess with this file unless you know what you're doing!
% =================================================================

\RequirePackage{eurosym}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage[onehalfspacing]{setspace}
\RequirePackage{chngcntr}
\RequirePackage{graphicx}
\RequirePackage[a4paper, margin=2.5cm]{geometry}
\RequirePackage[english]{babel}
\RequirePackage{fancyhdr}
\RequirePackage{titlesec}
\RequirePackage{enumitem}
\RequirePackage{etoolbox}
\RequirePackage[printonlyused]{acronym}
\RequirePackage{cite}
\RequirePackage{caption}
\RequirePackage{subcaption}
\RequirePackage{listings}
\RequirePackage{booktabs}
\RequirePackage{microtype} 
\RequirePackage{xcolor}
\RequirePackage{url}
\RequirePackage{tipa}
\RequirePackage{bigfoot}
\RequirePackage{minted}
\RequirePackage{algorithm}
\RequirePackage{algorithmicx}
\RequirePackage{algpseudocode}
\RequirePackage{csquotes}
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    citecolor=black,
    linkcolor=black,
    filecolor=black,      
    urlcolor=black,
}
%
% you may need to uncomment the command below if you use eps format for figures
%\RequirePackage{epstopdf}
%

\lstdefinestyle{prettycode}{
    backgroundcolor=\color{gray!3!white},
    commentstyle={\color{darkgray!90!white}\ttfamily},
    %commentstyle=\color{codegreen},
    %keywordstyle=\color{magenta},
    %numberstyle=\tiny\color{codegray},
    %stringstyle=\color{codepurple},
    frame=single,
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    %numbers=left,                    
    %numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=prettycode}

%
\titleformat{\subsubsection}{\normalfont\normalsize\bfseries}{\thesubsubsection}{0.5em}{}
\titlespacing*{\subsubsection}
{0pt}{2.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

%
\makeatletter
    \def\section{\@startsection{section}{1}%
      \z@{.5\linespacing\@plus.7\linespacing}{.25\linespacing}%
      {\normalfont\bfseries\flushleft}}
      
    \def\subsection{\@startsection{subsection}{2}%
      \z@{.5\linespacing\@plus.7\linespacing}{.25\linespacing}%
      {\normalfont\bfseries\flushleft}}

    \def\subsubsection{\@startsection{subsubsection}{3}%
      \z@{.5\linespacing\@plus.7\linespacing}{.1\linespacing}%
      {\normalfont\itshape}}

    \let\@afterindenttrue\@afterindentfalse
\makeatother

\setcounter{MaxMatrixCols}{10}
%
\providecommand{\U}[1]{\protect\rule{.1in}{.1in}}
\theoremstyle{plain}
\newtheorem{acknowledgement}{Acknowledgement}
\newtheorem{axiom}{Axiom}[chapter]
\newtheorem{case}{Case}[chapter]
\newtheorem{claim}{Claim}[chapter]
\newtheorem{conclusion}{Conclusion}[chapter]
\newtheorem{condition}{Condition}[chapter]
\newtheorem{conjecture}{Conjecture}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{criterion}{Criterion}[chapter]
\newtheorem{definition}{Definition}[chapter]
\newtheorem{example}{Example}[chapter]
\newtheorem{exercise}{Exercise}[chapter]
\newtheorem{lemma}{Lemma}[chapter]
\newtheorem{notation}{Notation}[chapter]
\newtheorem{problem}{Problem}[chapter]
\newtheorem{proposition}{Proposition}[chapter]
\newtheorem{remark}{Remark}[chapter]
\newtheorem{solution}{Solution}[chapter]
\newtheorem{summary}{Summary}[chapter]
\newtheorem{theorem}{Theorem}[chapter]
\numberwithin{equation}{chapter}

\makeatletter
\newcommand\frontFont{\@setfontsize\frontFont{14}{14}}
\newcommand\numberprefix{}
\def\numberline#1{\hb@xt@\@tempdima{\numberprefix #1\hfil}}

% ============================================================
\newcommand{\lofskip}[1]{\gdef\listOfFiguresLeftSpacing{#1}}
\newcommand{\lotskip}[1]{\gdef\listOfTablesLeftSpacing{#1}}
% ============================================================

% List of Figures
\def\l@figure#1#2{\@tocline{0}{3pt plus2pt}{0pt}{\ifdef\listOfFiguresLeftSpacing{\listOfFiguresLeftSpacing}{6pc}}{}%
  {\renewcommand\numberprefix{Figure~}#1}{#2}}

% List of Tables
\def\l@table#1#2{\@tocline{0}{3pt plus2pt}{0pt}{\ifdef\listOfTablesLeftSpacing{\listOfTablesLeftSpacing}{6pc}}{}%
  {\renewcommand\numberprefix{Table~}#1}{#2}}
\makeatother

\makeatletter
\def\cleardoublepage{\clearpage\if@twoside%
  \ifodd\c@page\else
  \vspace*{\fill}
  \hfill
  \begin{center}
  {\fontfamily{Montserrat-TOsF}\selectfont\small [ This page is intentionally left blank. ]}
  
  \end{center}
  \vspace{\fill}
  \thispagestyle{empty}
  \newpage
 \if@twocolumn\hbox{}\newpage\fi\fi\fi
}
\makeatother

%
% Please write the references according to your school
%
\newenvironment{dedicationenv}
  {%\clearpage           % we want a new page
   \thispagestyle{empty}% no header and footer
   \vspace*{\stretch{1}}% some space at the top
   %\itshape             % the text is in italics
   \raggedleft          % flush to the right margin
  }
  {\par % end the paragraph
   \vspace{\stretch{3}} % space at bottom is three times that at the top
   %\clearpage           % finish off the page
  }
  \numberwithin{section}{chapter}
\fancyhf{}
\pagestyle{fancy}
\fancyfoot[LE,RO]{\scriptsize\thepage}
%
\makeatletter
\def\ps@plain{\ps@empty
 \def\@evenfoot{%
   \normalfont\scriptsize
   \rlap{\thepage}\hfil
   }%
 \def\@oddfoot{%
   \normalfont\scriptsize\hfil
   \llap{\thepage}
   }%
}
\makeatother
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
%
\RequirePackage{montserrat}
\RequirePackage[T1]{fontenc}
\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
%
\numberwithin{table}{chapter}
\numberwithin{figure}{chapter}

\setlength{\parindent}{0.7cm}

\addto{\extrasenglish}{%
  \renewcommand{\bibname}{References}
}

\let\olddocument=\document
\let\oldenddocument=\enddocument

\makeatletter
\def\l@subsection{\@tocline{2}{0pt}{2.5pc}{5pc}{}}
\makeatother

% =================================================================
\renewcommand{\title}[1]{\gdef\thetitle{#1}}

\renewcommand{\date}[2]{
    \gdef\thedate{#1, #2}
    \gdef\themonth{#1}
    \gdef\theyear{#2}
}

\renewcommand{\author}[1]{\gdef\theauthor{#1}}

\newcommand{\department}[1]{\gdef\thedepartment{#1}}

\newcommand{\program}[2]{
    \gdef\theprogram{#1}
    \gdef\thespecialty{#2}
}

\newcommand{\supervisors}[1]{\gdef\thesupervisors{#1}}

\newcommand{\jury}[1]{\gdef\thejury{#1}}

\newcommand{\acknowledgements}[1]{\gdef\theacknowledgements{#1}}

\newcommand{\dedication}[1]{\gdef\thededication{#1}}

\newcommand{\resumo}[2]{
    \gdef\theabstractpt{#1}
    \gdef\thekeywordspt{#2}
}

\renewcommand{\abstract}[2]{
    \gdef\theabstract{#1}
    \gdef\thekeywords{#2}
}

\newcommand{\acronyms}[1]{\gdef\theacronyms{#1}}
% =================================================================

\definecolor{ISCTEDarkBlue}{rgb}{0,0.08,0.45}

\renewenvironment{document}{\olddocument

\sffamily
\frontFont
\begin{flushleft}
\includegraphics[width=6.03cm]{images/iscte.png}\\[3.3mm]

{\color{ISCTEDarkBlue}\hrulefill}
~\\
~\\
~\\
\ifdef\isreport{
\textbf{\thetitle}\\
~\\
\theyear\space Progress Report
~\\
}{
\textbf{\thetitle}\\
}
~\\
~\\
~\\
\theauthor\\
~\\
~\\
~\\
~\\
PhD in \textit{\theprogram},\\In the Specialty of \textit{\thespecialty}\\
~\\
~\\
~\\
~\\
Supervisor(s):
~\\
~\\
\thesupervisors
~\\
\vfill\thedate
\end{flushleft}
\thispagestyle{empty}
\cleardoublepage
\begin{flushleft}
  \includegraphics[width=6.03cm]{images/ista.png}\\[7mm]

{\color{ISCTEDarkBlue}\hrulefill}
~\\
~\\
~\\
\thedepartment
~\\
~\\
~\\
\ifdef\isreport{
\textbf{\thetitle}\\
~\\
\theyear\space Progress Report
~\\
}{
\textbf{\thetitle}\\
}
~\\
~\\
~\\
\theauthor\\
~\\
~\\
~\\
PhD in \textit{\theprogram},\\In the Specialty of \textit{\thespecialty}\\
~\\
~\\
~\\
\ifdef\isreport{Thesis Monitoring 
Committee}{Jury}:
~\\
~\\
\thejury
~\\
\vfill\thedate
\end{flushleft}
\thispagestyle{empty}
\rmfamily
\normalsize
\frontmatter
%\addtocontents{toc}{\setcounter{tocdepth}{2}}
\thispagestyle{empty}

\frontmatter
\addtocontents{toc}{\setcounter{tocdepth}{2}}
\thispagestyle{empty}

\ifdef\isreport{}{
\noindent\textbf{Direitos de C\'{o}pia / Copyright}

\noindent \textcopyright\space Copyright: \theauthor.\\

\noindent O Iscte - Instituto Universit\'{a}rio de Lisboa (ISCTE-IUL) tem o direito, perp\'{e}tuo e sem limites geogr\'{a}ficos, de arquivar e publicitar este trabalho atrav\'{e}s de exemplares impressos reproduzidos em papel ou de forma digital, ou por qualquer outro meio conhecido ou que venha a ser inventado, de o divulgar atrav\'{e}s de reposit\'{o}rios cient\'{i}ficos e de admitir a sua c\'{o}pia e distribuição com objetivos educacionais ou de investiga\c{c}\~{a}o, n\~{a}o comerciais, desde que seja dado cr\'{e}dito ao autor e editor.\\

\noindent Iscte - Instituto Universit\'{a}rio de Lisboa (ISCTE-IUL) reserves the right, in perpetuity and without geographical limitations, to archive and publish this work through printed copies reproduced on paper or digitally, or by any other means, known or which come to be invented, of disseminating the work through scientific repositories and to allow for its copying and distribution for non-commercial educational or research purposes, as long as credit is given to the author and editor.

\thispagestyle{empty}

\frontmatter
\thispagestyle{empty}

\ifdef\thededication
{
    \begin{dedicationenv}%
    \begin{flushright}
    \thededication
    \end{flushright}%
    \end{dedicationenv}
}
}

\ifdef\isreport{}{
\setcounter{page}{1}
\pagenumbering{roman} %
\ifdef\theacknowledgements
{
    \chapter*{Acknowledgments}
    \setcounter{page}{1}
    \theacknowledgements
}}

\chapter*{Resumo}
\theabstractpt

\vspace{3ex}
\noindent\textbf{Palavras-Chave:} \textit{\thekeywordspt}

\chapter*{Abstract}
\theabstract

\vspace{3ex}
\noindent\textbf{Keywords:} \textit{\thekeywords}

\tableofcontents
\listoffigures
\listoftables
\cleardoublepage
%\printglossary[type=\acronymtype, nonumberlist, nogroupskip]
\ifdef\theacronyms
{
    \chapter*{List of Acronyms}
    \begin{acronym}
    \theacronyms
    \end{acronym}
}

\mainmatter

\hyphenation{wri-te he-re pro-per hy-phe-ni-za-tion
}%

\setcounter{page}{1}
\pagenumbering{arabic}
}{
\bibliographystyle{ieeetr}
\bibliography{references}{}
\oldenddocument
}